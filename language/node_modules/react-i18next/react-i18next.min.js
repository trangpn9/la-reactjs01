!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],t):t((e=e||self).ReactI18next={},e.React)}(this,function(e,t){"use strict";var n="default"in t?t.default:t;function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){r(e,t,n[t])})}return e}function o(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var s={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,menuitem:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},c=/([\w-]+)|=|(['"])([.\s\S]*?)\2/g,l=/(?:<!--[\S\s]*?-->|<(?:"[^"]*"['"]*|'[^']*'['"]*|[^'">])+>)/g,u=Object.create?Object.create(null):{};function f(e,t,n,r,i){var o=t.indexOf("<",r),a=t.slice(r,-1===o?void 0:o);/^\s*$/.test(a)&&(a=" "),(!i&&o>-1&&n+e.length>=0||" "!==a)&&e.push({type:"text",content:a})}function p(e,t){switch(t.type){case"text":return e+t.content;case"tag":return e+="<"+t.name+(t.attrs?function(e){var t=[];for(var n in e)t.push(n+'="'+e[n]+'"');return t.length?" "+t.join(" "):""}(t.attrs):"")+(t.voidElement?"/>":">"),t.voidElement?e:e+t.children.reduce(p,"")+"</"+t.name+">"}}var d={parse:function(e,t){t||(t={}),t.components||(t.components=u);var n,r=[],i=-1,o=[],a={},p=!1;return e.replace(l,function(l,u){if(p){if(l!=="</"+n.name+">")return;p=!1}var d,g="/"!==l.charAt(1),h=0===l.indexOf("\x3c!--"),m=u+l.length,y=e.charAt(m);g&&!h&&(i++,"tag"===(n=function(e){var t,n=0,r=!0,i={type:"tag",name:"",voidElement:!1,attrs:{},children:[]};return e.replace(c,function(o){if("="===o)return r=!0,void n++;r?0===n?((s[o]||"/"===e.charAt(e.length-2))&&(i.voidElement=!0),i.name=o):(i.attrs[t]=o.replace(/^['"]|['"]$/g,""),t=void 0):(t&&(i.attrs[t]=t),t=o),n++,r=!1}),i}(l)).type&&t.components[n.name]&&(n.type="component",p=!0),n.voidElement||p||!y||"<"===y||f(n.children,e,i,m,t.ignoreWhitespace),a[n.tagName]=n,0===i&&r.push(n),(d=o[i-1])&&d.children.push(n),o[i]=n),(h||!g||n.voidElement)&&(h||i--,!p&&"<"!==y&&y&&f(d=-1===i?r:o[i].children,e,i,m,t.ignoreWhitespace))}),!r.length&&e.length&&f(r,e,0,0,t.ignoreWhitespace),r},stringify:function(e){return e.reduce(function(e,t){return e+p("",t)},"")}};let g,h,m={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",useSuspense:!0};const y=n.createContext();function b(){return h}function v(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};m=i({},m,e)}function O(){return m}class j{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(e=>{this.usedNamespaces[e]||(this.usedNamespaces[e]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}function x(e){g=e}function S(){return g}const w={type:"3rdParty",init(e){v(e.options.react),x(e)}};function E(e){return t=>new Promise(n=>{const r=I();e.getInitialProps?e.getInitialProps(t).then(e=>{n(i({},e,r))}):n(r)})}function I(){const e=S(),t=e.reportNamespaces?e.reportNamespaces.getUsedNamespaces():[],n={},r={};return e.languages.forEach(n=>{r[n]={},t.forEach(t=>{r[n][t]=e.getResourceBundle(n,t)||{}})}),n.initialI18nStore=r,n.initialLanguage=e.language,n}function $(){if(console&&console.warn){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];"string"==typeof t[0]&&(t[0]=`react-i18next:: ${t[0]}`),console.warn.apply(null,t)}}const N={};function P(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];"string"==typeof t[0]&&N[t[0]]||("string"==typeof t[0]&&(N[t[0]]=new Date),$(...t))}function k(e,t,n){e.loadNamespaces(t,()=>{if(e.isInitialized)n();else{const t=()=>{setImmediate(()=>{e.off("initialized",t)}),n()};e.on("initialized",t)}})}function A(e){return e&&(e.children||e.props&&e.props.children)}function R(e){return e&&e.children?e.children:e.props&&e.props.children}function T(e,t,r){if(""===t)return[];if(!e)return[t];const o={};!function e(t){"[object Array]"!==Object.prototype.toString.call(t)&&(t=[t]),t.forEach(t=>{"string"!=typeof t&&(A(t)?e(R(t)):"object"!=typeof t||n.isValidElement(t)||Object.assign(o,t))})}(e),t=r.services.interpolator.interpolate(t,o,r.language);const a=function e(t,r){return"[object Array]"!==Object.prototype.toString.call(t)&&(t=[t]),"[object Array]"!==Object.prototype.toString.call(r)&&(r=[r]),r.reduce((r,o,a)=>{if("tag"===o.type){const s=t[parseInt(o.name,10)]||{},c=n.isValidElement(s);if("string"==typeof s)r.push(s);else if(A(s)){const t=e(R(s),o.children);s.dummy&&(s.children=t),r.push(n.cloneElement(s,i({},s.props,{key:a}),t))}else if("object"!=typeof s||c)r.push(s);else{const e=o.children[0]?o.children[0].content:null;e&&r.push(e)}}else"text"===o.type&&r.push(o.content);return r},[])}([{dummy:!0,children:e}],d.parse(`<0>${t}</0>`));return R(a[0])}function z(e){const n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).i18n,r=(b()?t.useContext(y):{}).i18n,o=n||r||S();if(o&&!o.reportNamespaces&&(o.reportNamespaces=new j),!o){P("You will need pass in an i18next instance by using i18nextReactModule");const e=[e=>e,{},!0];return e.t=(e=>e),e.i18n={},e.ready=!0,e}const s=i({},O(),o.options.react);let c=e||o.options&&o.options.defaultNS;c="string"==typeof c?[c]:c||["translation"],o.reportNamespaces.addUsedNamespaces&&o.reportNamespaces.addUsedNamespaces(c);const l=(o.isInitialized||o.initializedStoreOnce)&&c.every(e=>(function(e,t){if(!t.languages||!t.languages.length)return P("i18n.languages were undefined or empty",t.languages),!0;const n=t.languages[0],r=!!t.options&&t.options.fallbackLng,i=t.languages[t.languages.length-1],o=(e,n)=>{const r=t.services.backendConnector.state[`${e}|${n}`];return-1===r||2===r};return!!t.hasResourceBundle(n,e)||!t.services.backendConnector.backend||!(!o(n,e)||r&&!o(i,e))})(e,o)),u=a(t.useState({t:o.getFixedT(null,c[0])}),2),f=u[0],p=u[1];function d(){p({t:o.getFixedT(null,c[0])})}t.useEffect(()=>{const e=s.bindI18n,t=s.bindI18nStore;return e&&o&&o.on(e,d),t&&o&&o.store.on(t,d),()=>{e&&o&&e.split(" ").forEach(e=>o.off(e,d)),t&&o&&t.split(" ").forEach(e=>o.store.off(e,d))}});const g=[f.t,o,l];if(g.t=f.t,g.i18n=o,g.ready=l,l)return g;if(!l&&!s.useSuspense)return k(o,c,()=>{d()}),g;throw new Promise(e=>{k(o,c,()=>{d(),e()})})}function C(e,n){const r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).i18n,i=(b()?t.useContext(y):{}).i18n,o=r||i||S();e&&!o.initializedStoreOnce&&(o.services.resourceStore.data=e,o.initializedStoreOnce=!0),n&&!o.initializedLanguageOnce&&(o.changeLanguage(n),o.initializedLanguageOnce=!0)}e.Trans=function(e){let r=e.children,a=e.count,s=e.parent,c=e.i18nKey,l=e.tOptions,u=e.values,f=e.defaults,p=e.components,d=e.ns,g=e.i18n,h=e.t,m=o(e,["children","count","parent","i18nKey","tOptions","values","defaults","components","ns","i18n","t"]);const v=(b()?t.useContext(y):{}).i18n,O=g||v||S();if(!O)return P("You will need pass in an i18next instance by using i18nextReactModule"),r;const j=h||O.t.bind(O),x=O.options&&O.options.react||{},w=void 0!==s?s:x.defaultTransParent,E=f||function e(t,r,o){return r?("[object Array]"!==Object.prototype.toString.call(r)&&(r=[r]),r.forEach((r,o)=>{const a=`${o}`;if("string"==typeof r)t=`${t}${r}`;else if(A(r))t=`${t}<${a}>${e("",R(r),o+1)}</${a}>`;else if(n.isValidElement(r))t=`${t}<${a}></${a}>`;else if("object"==typeof r){const e=i({},r),n=e.format;delete e.format;const o=Object.keys(e);n&&1===o.length?t=`${t}{{${o[0]}, ${n}}}`:1===o.length?t=`${t}{{${o[0]}}}`:$("react-i18next: the passed in object contained more than one variable - the object should look like {{ value, format }} where format is optional.",r)}else $("Trans: the passed in value is invalid - seems you passed in a variable like {number} - please pass in variables for interpolation as full objects like {{number}}.",r)}),t):""}("",r)||x.transEmptyNodeValue,I=x.hashTransKey,N=c||(I?I(E):E),k=N?j(N,i({},l,u,u?{}:{interpolation:{prefix:"#$?",suffix:"?$#"}},{defaultValue:E,count:a,ns:d})):E;return w?n.createElement(w,m,T(p||r,k,O)):T(p||r,k,O)},e.useTranslation=z,e.withTranslation=function(e){return function(t){return function(r){const o=a(z(e,r),3),s=o[0],c=o[1],l=o[2];return n.createElement(t,i({},r,{t:s,i18n:c,tReady:l}))}}},e.Translation=function(e){const t=e.ns,n=e.children,r=a(z(t,o(e,["ns","children"])),3),i=r[0],s=r[1],c=r[2];return n(i,{i18n:s,lng:s.language},c)},e.I18nextProvider=function(e){let t=e.i18n,r=e.children;return h=!0,n.createElement(y.Provider,{value:{i18n:t}},r)},e.withSSR=function(){return function(e){function t(t){let r=t.initialI18nStore,a=t.initialLanguage,s=o(t,["initialI18nStore","initialLanguage"]);return C(r,a),n.createElement(e,i({},s))}return t.getInitialProps=E(e),t}},e.useSSR=C,e.initReactI18next=w,e.setDefaults=v,e.getDefaults=O,e.setI18n=x,e.getI18n=S,e.composeInitialProps=E,e.getInitialProps=I,Object.defineProperty(e,"__esModule",{value:!0})});
